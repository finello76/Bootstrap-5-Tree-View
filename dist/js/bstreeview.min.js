!function(t,e,s,i){"use strict";let n="bstreeview",a={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,chevronIntent:1,parentsMarginLeft:1.25,openNodeLinkOnNewTab:!0},r={treeviewItem:'<div class="lh-lg" data-bs-toggle="collapse"></div>',treeviewGroupItem:'<div class="lh-lg collapse" id="itemid"></div>',treeviewItemStateIcon:'<i class="state-icon"></i>',treeviewItemIcon:'<i class="item-icon"></i>'};function d(e,s){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},a,s),this.init()}t.extend(d.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),this._tree||(this._tree=JSON.parse(JSON.stringify(this.tree))),delete this.settings.data),t(this.element).addClass("list-group"),this.initData({nodes:this.tree});let s=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",function(i){t(".state-icon",this).toggleClass(s.settings.expandIcon).toggleClass(s.settings.collapseIcon),i.target.hasAttribute("href")&&(s.settings.openNodeLinkOnNewTab?e.open(i.target.getAttribute("href"),"_blank"):e.location=i.target.getAttribute("href"))})},initData:function(e){if(!e.nodes)return;let s=e,i=this;t.each(e.nodes,function(t,e){e.nodeId=i.nodes.length,e.parentId=s.nodeId,i.nodes.push(e),e.nodes&&i.initData(e)})},reset:function(e){this.settings.data=e,t(this.element).empty(),this.init()},search:function(t,e){if(t.length>0){let s=new JsonSearch().searchAndReturnStructure(this._tree,t,e);this.reset(s)}else this.reset(this._tree)},build:function(e,s,i){let n=this;i+=1,t.each(s,function s(a,d){let o=n.settings.parentsMarginLeft;i>0&&(o=(i-1)*n.settings.indent),d.nodes||(o+=n.settings.chevronIntent);let l=t(r.treeviewItem).attr("data-bs-target","#"+n.itemIdPrefix+d.nodeId).attr("style","padding-left:"+o+"rem");if(d.nodes){let h=t(r.treeviewItemStateIcon).addClass(d.expanded?n.settings.expandIcon:n.settings.collapseIcon);l.append(h)}if(d.icon){let c=t(r.treeviewItemIcon).addClass(d.icon);l.append(c)}if(l.append(d.text),d.href&&l.attr("href",d.href),d.class&&l.addClass(d.class),d.id&&l.attr("id",d.id),e.append(l),d.nodes){let f=t(r.treeviewGroupItem).attr("id",n.itemIdPrefix+d.nodeId);e.append(f),n.build(f,d.nodes,i),d.expanded&&f.addClass(n.settings.expandClass)}})}}),t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new d(this,e))})}}(jQuery,window,document);class JsonSearch{searchAndReturnStructure(t,e,s){let i=[];return t.forEach(t=>{let n={};for(let a in t)if("nodes"===a&&Array.isArray(t[a])){let r=this.searchAndReturnStructure(t[a],e,s);if(r.length>0){for(let d in t)n[d]=t[d];n[a]=r}}else{if("text"===a&&"string"==typeof t[a]&&this.match(t[a],e,s))return i.push(t);"object"==typeof t[a]&&null!==t[a]&&(n[a]=t[a])}Object.keys(n).length>0&&i.push(n)}),i}match(t,e,s){return s&&(t=t.toLowerCase(),e=e.toLowerCase()),t.includes(e)}}