/*
 @preserve
 bstreeview.js
 Version: 1.2.0
 Authors: Sami CHNITER <sami.chniter@gmail.com>
 Copyright 2020
 License: Apache License 2.0
 Project: https://github.com/chniter/bstreeview
*/
!function(t,e,i,n){"use strict";var s="bstreeview",a={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,chevronIntent:1,parentsMarginLeft:1.25,openNodeLinkOnNewTab:!0},d={treeviewItem:'<div class="lh-lg" data-bs-toggle="collapse"></div>',treeviewGroupItem:'<div class="lh-lg collapse" id="itemid"></div>',treeviewItemStateIcon:'<i class="state-icon"></i>',treeviewItemIcon:'<i class="item-icon"></i>'};function o(e,i){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},a,i),this.init()}t.extend(o.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),delete this.settings.data),t(this.element).addClass("list-group"),this.initData({nodes:this.tree});var i=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",function(n){t(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon),n.target.hasAttribute("href")&&(i.settings.openNodeLinkOnNewTab?e.open(n.target.getAttribute("href"),"_blank"):e.location=n.target.getAttribute("href"))})},initData:function(e){if(e.nodes){var i=e,n=this;t.each(e.nodes,function t(e,s){s.nodeId=n.nodes.length,s.parentId=i.nodeId,n.nodes.push(s),s.nodes&&n.initData(s)})}},build:function(e,i,n){var s=this;n+=1,t.each(i,function i(a,o){let r=s.settings.parentsMarginLeft;n>0&&(r=s.settings.indent+n*s.settings.indent),o.nodes||(r+=s.settings.chevronIntent);var l=t(d.treeviewItem).attr("data-bs-target","#"+s.itemIdPrefix+o.nodeId).attr("style","padding-left:"+r+"rem");if(o.nodes){var h=t(d.treeviewItemStateIcon).addClass(o.expanded?s.settings.expandIcon:s.settings.collapseIcon);l.append(h)}if(o.icon){var c=t(d.treeviewItemIcon).addClass(o.icon);l.append(c)}if(l.append(o.text),o.href&&l.attr("href",o.href),o.class&&l.addClass(o.class),o.id&&l.attr("id",o.id),e.append(l),o.nodes){var g=t(d.treeviewGroupItem).attr("id",s.itemIdPrefix+o.nodeId);e.append(g),s.build(g,o.nodes,n),o.expanded&&g.addClass(s.settings.expandClass)}})}}),t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new o(this,e))})}}(jQuery,window,document);